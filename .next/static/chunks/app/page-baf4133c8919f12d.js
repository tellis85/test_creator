(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1766:(e,t,a)=>{Promise.resolve().then(a.bind(a,3161))},3161:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var s=a(5155),l=a(2115),i=a(991),r=a(3463),n=a(9795);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}let d=i.bL;i.l9;let c=i.ZL,m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(i.hJ,{ref:t,className:o("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});m.displayName=i.hJ.displayName;let u=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(i.UC,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:l})]})});u.displayName=i.UC.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(i.hE,{ref:t,className:o("text-lg font-semibold leading-none tracking-tight",a),...l})}).displayName=i.hE.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(i.VY,{ref:t,className:o("text-sm text-muted-foreground",a),...l})}).displayName=i.VY.displayName;var f=a(142),h=a(78),g=a.n(h);let x=()=>{let[e,t]=(0,l.useState)([]),[a,i]=(0,l.useState)(!0),[r,n]=(0,l.useState)(null),[o,c]=(0,l.useState)(""),[m,h]=(0,l.useState)(""),[x,p]=(0,l.useState)(""),[b,y]=(0,l.useState)(""),[j,v]=(0,l.useState)({}),[N,w]=(0,l.useState)(!1),[C,k]=(0,l.useState)(1),[S,z]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/Reformatted_Data.csv"),a=(await e.text()).split("\n").slice(1).filter(e=>e.trim()).map(e=>{let t=e.split(",").map(e=>e.trim());return{Brand:t[0]||"",seriesname:t[1]||"",colorcode:t[2]||"","Background Template":t[3]||"",finish:t[4]||"",colorname:t[5]||"","Color Code + Color Name":t[6]||"",nominalsize_1:t[7]||"",nominalsize_2:t[8]||"",nominalsize_3:t[9]||"",nominalsize_4:t[10]||"",nominalsize_5:t[11]||"",nominalsize_6:t[12]||"",nominalsize_7:t[13]||"",nominalsize_8:t[14]||"",nominalsize_9:t[15]||"",nominalsize_10:t[16]||""}});t(a),i(!1)}catch(e){console.error("Error loading CSV:",e),n("Failed to load label data"),i(!1)}})()},[]),(0,l.useEffect)(()=>{v({})},[m]);let _=e=>{if(!e)return null;let t=e.trim();return"/templates/daltile/".concat(t.replace(/\.png$/,".jpg"))},A=(0,l.useMemo)(()=>[...new Set(e.map(e=>e.Brand))],[e]),B=(0,l.useMemo)(()=>o?[...new Set(e.filter(e=>e.Brand===o).map(e=>e.seriesname))]:[],[o,e]),E=(0,l.useMemo)(()=>{if(!m)return[];let t=new Map;return e.filter(e=>e.Brand===o&&e.seriesname===m).forEach(e=>{let a=e["Color Code + Color Name"];!t.has(a)&&a&&t.set(a,{code:a,displayName:a,finishes:[]});let s=t.get(a);if(s&&e.finish&&"NULL"!==e.finish&&!s.finishes.find(t=>t.finish===e.finish)){let t=Array.from({length:10},(t,a)=>e["nominalsize_".concat(a+1)]).filter(e=>e&&""!==e);s.finishes.push({finish:e.finish,sizes:t})}}),Array.from(t.values())},[o,m,e]),F=(0,l.useMemo)(()=>{if(!x)return[];let e=E.find(e=>e.displayName===x);return(null==e?void 0:e.finishes)||[]},[x,E]),T=(0,l.useMemo)(()=>{if(!b||!x)return[];let e=E.find(e=>e.displayName===x),t=null==e?void 0:e.finishes.find(e=>e.finish===b);return(null==t?void 0:t.sizes)||[]},[x,b,E]),I=t=>{let{labelConfig:a=null,scale:l=1}=t,i=a?e.find(e=>e.Brand===a.brand&&e.seriesname===a.series&&e["Color Code + Color Name"]===a.colorCode):e.find(e=>e.Brand===o&&e.seriesname===m&&e["Color Code + Color Name"]===x),r=i?_(i["Background Template"]):null,n=Object.entries(a?a.sizes:j).filter(e=>{let[t,a]=e;return a}).map(e=>{let[t]=e;return t}).join(", ");return(0,s.jsxs)("div",{className:"relative bg-white",style:{width:"".concat(192*l,"px"),height:"".concat(288*l,"px")},children:[r&&(0,s.jsx)("img",{src:r,alt:"Label Template",className:"w-full h-full object-contain",onError:e=>{console.error("Template load error:",r),e.currentTarget.src="/api/placeholder/192/288"}}),i&&(0,s.jsxs)("div",{style:{position:"absolute",top:"calc(2in + 0.25in)",left:0,right:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",textAlign:"center"},children:[(0,s.jsx)("div",{style:{fontFamily:"Geometria, Arial, sans-serif",fontSize:"".concat(8*l,"px"),lineHeight:"1.2",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"500",color:"#000000",margin:"1px 0"},children:i["Color Code + Color Name"]}),(a?a.finish:b)&&(0,s.jsx)("div",{style:{fontFamily:"Geometria, Arial, sans-serif",fontSize:"".concat(8*l,"px"),lineHeight:"1.2",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"500",color:"#000000",margin:"1px 0"},children:a?a.finish:b}),n&&(0,s.jsx)("div",{style:{fontFamily:"Geometria, Arial, sans-serif",fontSize:"".concat(8*l,"px"),lineHeight:"1.2",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"500",color:"#000000",margin:"1px 0"},children:n})]})]})},L=e=>{z(t=>t.filter((t,a)=>a!==e))},P=async()=>{let e=document.getElementById("print-layout");if(e)try{let t=await g()(e,{scale:4,useCORS:!0,logging:!1,width:1056,height:816,backgroundColor:"#ffffff",windowWidth:1056,windowHeight:816,x:0,y:0,scrollX:0,scrollY:0}),a=new f.Ay({orientation:"landscape",unit:"in",format:[11,8.5]}),s=t.toDataURL("image/png",1);a.addImage(s,"PNG",0,0,11,8.5,void 0,"FAST"),a.save("labels.pdf")}catch(e){console.error("Error generating PDF:",e),alert("Failed to generate PDF. Please try again.")}};return a?(0,s.jsx)("div",{className:"p-8 text-center",children:"Loading label data..."}):r?(0,s.jsx)("div",{className:"p-8 text-center text-red-500",children:r}):(0,s.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:o,onChange:e=>{c(e.target.value),h(""),p(""),y(""),v({})},children:[(0,s.jsx)("option",{value:"",children:"Select Brand"}),A.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Series"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:m,onChange:e=>{h(e.target.value),p(""),y(""),v({})},disabled:!o,children:[(0,s.jsx)("option",{value:"",children:"Select Series"}),B.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:x,onChange:e=>{p(e.target.value),y(""),v({})},disabled:!m,children:[(0,s.jsx)("option",{value:"",children:"Select Color"}),E.map(e=>{let{displayName:t}=e;return(0,s.jsx)("option",{value:t,children:t},t)})]})]}),F.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finish"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:b,onChange:e=>{y(e.target.value),v({})},disabled:!x,children:[(0,s.jsx)("option",{value:"",children:"Select Finish"}),F.map(e=>{let{finish:t}=e;return(0,s.jsx)("option",{value:t,children:t},t)})]})]}),T.length>0&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Sizes"}),(0,s.jsx)("div",{className:"space-y-2",children:T.map(e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"size-".concat(e),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:j[e]||!1,onChange:t=>{v(a=>({...a,[e]:t.target.checked}))}}),(0,s.jsx)("label",{htmlFor:"size-".concat(e),className:"ml-2 text-sm text-gray-700",children:e})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Quantity (Total ",S.reduce((e,t)=>e+t.quantity,0),"/8)"]}),(0,s.jsx)("input",{type:"number",min:"1",max:"8",value:C,onChange:e=>{let t=parseInt(e.target.value);t>0&&t<=8&&k(t)},className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",onClick:()=>{if(!x)return;if(S.reduce((e,t)=>e+t.quantity,0)+C>8){alert("Maximum of 8 labels can be added to the layout");return}let e={brand:o,series:m,colorCode:x,finish:b||"N/A",sizes:{...j},displayName:x,quantity:C};z(t=>[...t,e]),c(""),h(""),p(""),y(""),v({}),k(1)},disabled:!x,children:"Add Label to Queue"})}),S.length>0&&(0,s.jsxs)("div",{className:"mt-4 border rounded-lg p-4 bg-gray-50",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium mb-2",children:["Queued Labels (",S.reduce((e,t)=>e+t.quantity,0),"/8)"]}),(0,s.jsx)("div",{className:"space-y-2",children:S.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-2 bg-white rounded shadow-sm",children:[(0,s.jsxs)("span",{className:"text-sm",children:[e.series," - ",e.displayName," (\xd7",e.quantity,")"]}),(0,s.jsx)("button",{onClick:()=>L(t),className:"text-red-600 hover:text-red-700 text-sm px-2 py-1",children:"Remove"})]},t))})]})]}),(0,s.jsx)("div",{className:"border rounded-lg p-4 bg-white min-h-[384px] flex items-center justify-center",children:(0,s.jsx)(I,{scale:1})})]}),(0,s.jsx)(d,{open:N,onOpenChange:w,children:(0,s.jsxs)(u,{className:"max-w-[95vw] w-[95vw] max-h-[95vh] overflow-y-auto",children:[(0,s.jsx)("div",{id:"print-layout",className:"bg-white flex items-center justify-center",children:(0,s.jsx)(()=>{let e=S.flatMap(e=>Array(e.quantity).fill(e)),t=8-e.length;return(0,s.jsx)("div",{className:"bg-white",style:{width:"11in",height:"8.5in",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 2in)",gridTemplateRows:"repeat(2, 3in)",gap:"0.3in",pageBreakAfter:"always",pageBreakInside:"avoid",margin:0,padding:0},children:[e.map((e,t)=>(0,s.jsx)("div",{style:{width:"2in",height:"3in",pageBreakInside:"avoid",breakInside:"avoid"},children:(0,s.jsx)(I,{labelConfig:e,scale:1})},t)),Array.from({length:t}).map((e,t)=>(0,s.jsx)("div",{style:{width:"2in",height:"3in",pageBreakInside:"avoid",breakInside:"avoid"}},"empty-".concat(t)))]})})},{})}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,s.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>w(!1),children:"Close"}),(0,s.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",onClick:P,children:"Download PDF"})]})]})}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsxs)("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:()=>w(!0),disabled:0===S.length,children:["Preview Print Layout (",S.reduce((e,t)=>e+t.quantity,0)," labels)"]})})]})};function p(){return(0,s.jsx)("main",{className:"min-h-screen p-4",children:(0,s.jsx)(x,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[930,316,225,441,517,358],()=>t(1766)),_N_E=e.O()}]);