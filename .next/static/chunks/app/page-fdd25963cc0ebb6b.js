(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8753:(e,t,a)=>{Promise.resolve().then(a.bind(a,3161))},3161:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var s=a(5155),l=a(2115),r=a(991),i=a(3463),n=a(9795);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,i.$)(t))}let d=r.bL;r.l9;let c=r.ZL,m=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hJ,{ref:t,className:o("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});m.displayName=r.hJ.displayName;let u=l.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(m,{}),(0,s.jsx)(r.UC,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:l})]})});u.displayName=r.UC.displayName;let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.hE,{ref:t,className:o("text-lg font-semibold leading-none tracking-tight",a),...l})});h.displayName=r.hE.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(r.VY,{ref:t,className:o("text-sm text-muted-foreground",a),...l})}).displayName=r.VY.displayName;var f=a(142),x=a(78),g=a.n(x);let p=()=>{let[e,t]=(0,l.useState)([]),[a,r]=(0,l.useState)(!0),[i,n]=(0,l.useState)(null),[o,c]=(0,l.useState)(1.25),[m,x]=(0,l.useState)(""),[p,b]=(0,l.useState)(""),[y,j]=(0,l.useState)(""),[v,N]=(0,l.useState)(""),[w,C]=(0,l.useState)({}),[k,S]=(0,l.useState)(!1),[z,_]=(0,l.useState)(""),[A,B]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/Reformatted_Data.csv"),a=(await e.text()).split("\n").slice(1).filter(e=>e.trim()).map(e=>{let t=e.split(",").map(e=>e.trim());return{Brand:t[0]||"",seriesname:t[1]||"",colorcode:t[2]||"","Background Template":t[3]||"",finish:t[4]||"",colorname:t[5]||"","Color Code + Color Name":t[6]||"",nominalsize_1:t[7]||"",nominalsize_2:t[8]||"",nominalsize_3:t[9]||"",nominalsize_4:t[10]||"",nominalsize_5:t[11]||"",nominalsize_6:t[12]||"",nominalsize_7:t[13]||"",nominalsize_8:t[14]||"",nominalsize_9:t[15]||"",nominalsize_10:t[16]||""}});t(a),r(!1)}catch(e){console.error("Error loading CSV:",e),n("Failed to load label data"),r(!1)}})()},[]),(0,l.useEffect)(()=>{C({})},[p]);let M=e=>{if(!e)return null;let t=e.trim();return"/templates/daltile/".concat(t.replace(/\.png$/,".jpg"))},E=(0,l.useMemo)(()=>[...new Set(e.map(e=>e.Brand))],[e]),P=(0,l.useMemo)(()=>m?[...new Set(e.filter(e=>e.Brand===m).map(e=>e.seriesname))]:[],[m,e]),T=(0,l.useMemo)(()=>{if(!p)return[];let t=new Map;return e.filter(e=>e.Brand===m&&e.seriesname===p).forEach(e=>{let a=e["Color Code + Color Name"];!t.has(a)&&a&&t.set(a,{code:a,displayName:a,finishes:[]});let s=t.get(a);if(s&&e.finish&&"NULL"!==e.finish&&!s.finishes.find(t=>t.finish===e.finish)){let t=Array.from({length:10},(t,a)=>e["nominalsize_".concat(a+1)]).filter(e=>e&&""!==e);s.finishes.push({finish:e.finish,sizes:t})}}),Array.from(t.values())},[m,p,e]),F=(0,l.useMemo)(()=>{if(!y)return[];let e=T.find(e=>e.displayName===y);return(null==e?void 0:e.finishes)||[]},[y,T]),I=(0,l.useMemo)(()=>{if(!v||!y)return[];let e=T.find(e=>e.displayName===y),t=null==e?void 0:e.finishes.find(e=>e.finish===v);return(null==t?void 0:t.sizes)||[]},[y,v,T]),L=t=>{let{labelConfig:a=null,scale:l=1}=t,r=a?e.find(e=>e.Brand===a.brand&&e.seriesname===a.series&&e["Color Code + Color Name"]===a.colorCode):e.find(e=>e.Brand===m&&e.seriesname===p&&e["Color Code + Color Name"]===y),i=r?M(r["Background Template"]):null,n=Object.entries(a?a.sizes:w).filter(e=>{let[t,a]=e;return a}).map(e=>{let[t]=e;return t}).join(", "),o=a?a.colorCode:y,d=a?a.finish:v;return(0,s.jsxs)("div",{className:"relative bg-white",style:{width:"".concat(192*l,"px"),height:"".concat(288*l,"px")},children:[i&&(0,s.jsx)("img",{src:i,alt:"Label Template",className:"w-full h-full object-contain",onError:e=>{console.error("Template load error:",i),e.currentTarget.src="/api/placeholder/192/288"}}),r&&(0,s.jsxs)("div",{style:{position:"absolute",top:"calc(2in + 0.25in)",left:0,right:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-start",textAlign:"center"},children:[o&&(0,s.jsx)("div",{style:{fontFamily:"Geometria, Arial, sans-serif",fontSize:"".concat(8*l,"px"),lineHeight:"1.2",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"500",color:"#000000",margin:"1px 0"},children:o}),d&&"N/A"!==d&&(0,s.jsx)("div",{style:{fontFamily:"Geometria, Arial, sans-serif",fontSize:"".concat(8*l,"px"),lineHeight:"1.2",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"500",color:"#000000",margin:"1px 0"},children:d}),n&&(0,s.jsx)("div",{style:{fontFamily:"Geometria, Arial, sans-serif",fontSize:"".concat(8*l,"px"),lineHeight:"1.2",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:"500",color:"#000000",margin:"1px 0"},children:n})]})]})},R=e=>{B(t=>t.filter((t,a)=>a!==e))},q=async()=>{if(document.getElementById("print-layout"))try{let e=A.flatMap(e=>Array(e.quantity).fill(e)),t=Math.ceil(e.length/8),a=new f.Ay({orientation:"landscape",unit:"in",format:[11,8.5]});for(let e=0;e<t;e++){let t=document.getElementById("sheet-".concat(e));if(!t)continue;e>0&&a.addPage([11,8.5],"landscape");let s=(await g()(t,{scale:4,useCORS:!0,logging:!1,width:1056,height:816,backgroundColor:"#ffffff",windowWidth:1056,windowHeight:816,x:0,y:0,scrollX:0,scrollY:0})).toDataURL("image/png",1);a.addImage(s,"PNG",0,0,11,8.5,void 0,"FAST")}a.save("labels.pdf")}catch(e){console.error("Error generating PDF:",e),alert("Failed to generate PDF. Please try again.")}};return a?(0,s.jsx)("div",{className:"p-8 text-center",children:"Loading label data..."}):i?(0,s.jsx)("div",{className:"p-8 text-center text-red-500",children:i}):(0,s.jsxs)("div",{className:"p-6 max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:m,onChange:e=>{x(e.target.value),b(""),j(""),N(""),C({})},children:[(0,s.jsx)("option",{value:"",children:"Select Brand"}),E.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Series"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:p,onChange:e=>{b(e.target.value),j(""),N(""),C({})},disabled:!m,children:[(0,s.jsx)("option",{value:"",children:"Select Series"}),P.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:y,onChange:e=>{j(e.target.value),N(""),C({})},disabled:!p,children:[(0,s.jsx)("option",{value:"",children:"Select Color"}),T.map(e=>{let{displayName:t}=e;return(0,s.jsx)("option",{value:t,children:t},t)})]})]}),F.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Finish"}),(0,s.jsxs)("select",{className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500",value:v,onChange:e=>{N(e.target.value),C({})},disabled:!y,children:[(0,s.jsx)("option",{value:"",children:"Select Finish"}),F.map(e=>{let{finish:t}=e;return(0,s.jsx)("option",{value:t,children:t},t)})]})]}),I.length>0&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Sizes"}),(0,s.jsx)("div",{className:"space-y-2",children:I.map(e=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"size-".concat(e),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:w[e]||!1,onChange:t=>{C(a=>({...a,[e]:t.target.checked}))}}),(0,s.jsx)("label",{htmlFor:"size-".concat(e),className:"ml-2 text-sm text-gray-700",children:e})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Quantity (Total labels: ",A.reduce((e,t)=>e+t.quantity,0),")"]}),(0,s.jsx)("input",{type:"number",min:"1",value:z,onChange:e=>{let t=parseInt(e.target.value);t>0&&_(t.toString())},className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-gray-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",onClick:()=>{if(!y)return;let e={brand:m,series:p,colorCode:y,finish:v,sizes:{...w},displayName:y,quantity:Number(z)};B(t=>[...t,e]),_("")},disabled:!y,children:"Add Label to Queue"})}),A.length>0&&(0,s.jsxs)("div",{className:"mt-4 border rounded-lg p-4 bg-gray-50",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium mb-2",children:["Queued Labels (Total: ",A.reduce((e,t)=>e+t.quantity,0),")"]}),(0,s.jsx)("div",{className:"space-y-2",children:A.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between items-center p-2 bg-white rounded shadow-sm",children:[(0,s.jsxs)("span",{className:"text-sm",children:[e.series," - ",e.displayName," (\xd7",e.quantity,")"]}),(0,s.jsx)("button",{onClick:()=>R(t),className:"text-red-600 hover:text-red-700 text-sm px-2 py-1",children:"Remove"})]},t))})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Preview (",Math.round(100*o),"%)"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"px-2 py-1 text-sm border rounded hover:bg-gray-50",onClick:()=>c(e=>Math.max(.5,e-.25)),children:"−"}),(0,s.jsx)("button",{className:"px-2 py-1 text-sm border rounded hover:bg-gray-50",onClick:()=>c(1.25),children:"Reset"}),(0,s.jsx)("button",{className:"px-2 py-1 text-sm border rounded hover:bg-gray-50",onClick:()=>c(e=>Math.min(3,e+.25)),children:"+"})]})]}),(0,s.jsx)("div",{className:"border rounded-lg p-4 bg-white min-h-[384px] flex items-center justify-center overflow-auto",children:(0,s.jsx)("div",{style:{transform:"scale(".concat(o,")"),transformOrigin:"center center",transition:"transform 0.2s"},children:(0,s.jsx)(L,{scale:1})})})]})]}),(0,s.jsx)(d,{open:k,onOpenChange:S,children:(0,s.jsxs)(u,{className:"max-w-[95vw] w-[95vw] max-h-[95vh] overflow-y-auto",children:[(0,s.jsx)(h,{children:"Print Layout Preview"}),(0,s.jsx)("div",{id:"print-layout",className:"bg-white flex items-center justify-center",children:(0,s.jsx)(()=>{let e=A.flatMap(e=>Array(e.quantity).fill(e)),t=Math.ceil(e.length/8),a=Array.from({length:t},(a,l)=>{let r=8*l,i=e.slice(r,r+8),n=8-i.length;return(0,s.jsx)("div",{id:"sheet-".concat(l),className:"bg-white page-break-after",style:{width:"11in",height:"8.5in",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",pageBreakAfter:l<t-1?"always":"auto",margin:"20px 0"},children:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 2in)",gridTemplateRows:"repeat(2, 3in)",gap:"0.3in",pageBreakInside:"avoid",margin:0,padding:0},children:[i.map((e,t)=>(0,s.jsx)("div",{style:{width:"2in",height:"3in",pageBreakInside:"avoid",breakInside:"avoid"},children:(0,s.jsx)(L,{labelConfig:e,scale:1})},"".concat(l,"-").concat(t))),Array.from({length:n}).map((e,t)=>(0,s.jsx)("div",{style:{width:"2in",height:"3in",pageBreakInside:"avoid",breakInside:"avoid"}},"empty-".concat(l,"-").concat(t)))]})},"sheet-".concat(l))});return(0,s.jsx)("div",{children:a})},{})}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,s.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",onClick:()=>S(!1),children:"Close"}),(0,s.jsx)("button",{className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",onClick:q,children:"Download PDF"})]})]})}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsxs)("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:()=>S(!0),disabled:0===A.length,children:["Preview Print Layout (",A.reduce((e,t)=>e+t.quantity,0)," labels on ",Math.ceil(A.reduce((e,t)=>e+t.quantity,0)/8)," sheets)"]})})]})};function b(){return(0,s.jsx)("main",{className:"min-h-screen p-4",children:(0,s.jsx)(p,{})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[930,316,225,441,517,358],()=>t(8753)),_N_E=e.O()}]);